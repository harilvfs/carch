name: PR

on:
  pull_request:
    types: [opened]
  workflow_dispatch:
    inputs:
      pr_number:
        description: 'Pull Request number'
        required: false

jobs:
  comment:
    runs-on: ubuntu-latest
    steps:
      - name: Comment on PR
        uses: actions/github-script@v7
        with:
          script: |
            const core = require('@actions/core');

            const manualPR = core.getInput('pr_number');
            const prNumber = manualPR ? parseInt(manualPR, 10) : context.issue.number;

            if (!prNumber) {
              core.setFailed("PR number not found.");
              return;
            }

            const message = [
              "Thanks for opening the PR! ğŸ™Œ",
              "",
              "Please make sure the PR title follows the [Conventional Commits](https://www.conventionalcommits.org/) guidelines.",
              "",
              "Also, prefer following this extended guide: https://gist.github.com/harilvfs/53cc86aa79ea4642356540aadc6bd87d",
              "",
              "âœ… Don't forget to check the CI workflow status! If it fails, review your changes and try to fix the issues.",
              "",
              "ğŸ’¬ Connect with us:",
              "- Discord: https://discord.com/invite/8NJWstnUHd",
              "- Telegram: https://t.me/carchx",
              "",
              "ğŸ• If your PR review is delayed, feel free to reach out via email: harilvfs@chalisehari.com.np",
              "",
              "Thank you! ğŸ’–"
            ].join("\n");

            github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: prNumber,
              body: message
            });
