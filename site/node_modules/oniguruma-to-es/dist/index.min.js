var OnigurumaToES=(()=>{var ce=Object.defineProperty;var Ft=Object.getOwnPropertyDescriptor;var Nt=Object.getOwnPropertyNames;var $t=Object.prototype.hasOwnProperty;var It=(e,t)=>{for(var r in t)ce(e,r,{get:t[r],enumerable:!0})},vt=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Nt(t))!$t.call(e,n)&&n!==r&&ce(e,n,{get:()=>t[n],enumerable:!(s=Ft(t,n))||s.enumerable});return e};var Pt=e=>vt(ce({},"__esModule",{value:!0}),e);var zr={};It(zr,{EmulatedRegExp:()=>ie,toDetails:()=>yt,toOnigurumaAst:()=>Wr,toRegExp:()=>qr});var w=String.fromCodePoint,f=String.raw,ve=(()=>{try{new RegExp("(?<n>)|(?<n>)")}catch{return!1}return!0})(),Pe=(()=>{try{new RegExp("(?i:)")}catch{return!1}return!0})(),Ge=(()=>{try{new RegExp("","v")}catch{return!1}return!0})();function O(e,{enable:t,disable:r}){return{dotAll:!r?.dotAll&&!!(t?.dotAll||e.dotAll),ignoreCase:!r?.ignoreCase&&!!(t?.ignoreCase||e.ignoreCase)}}function M(e,t,r){return e.has(t)||e.set(t,r),e.get(t)}function B(e,t){return e.alternatives.length===1&&e.alternatives[0].elements.length===1&&(!t||t(e.alternatives[0].elements[0]))}function V(e,t){return ue[e]>=ue[t]}function x(e,t){if(!e)throw new Error(t??"Value expected");return e}var ue={ES2018:2018,ES2024:2024,ES2025:2025},Gt={auto:"auto",ES2018:"ES2018",ES2024:"ES2024",ES2025:"ES2025"};function Z(e){if(e?.target!==void 0&&!Gt[e.target])throw new Error(`Unexpected target "${e.target}"`);let t={accuracy:"default",avoidSubclass:!1,flags:"",global:!1,hasIndices:!1,maxRecursionDepth:5,target:"auto",tmGrammar:!1,verbose:!1,...e};return t.target==="auto"&&(t.target=ve&&Pe?"ES2025":Ge?"ES2024":"ES2018"),t}var Lt=new Set([w(304),w(305)]);function pe(e){if(Lt.has(e))return[e];let t=new Set,r=e.toLowerCase(),s=r.toUpperCase(),n=Mt.get(r),o=Tt.get(r),a=Ot.get(r);return[...s].length===1&&t.add(s),a&&t.add(a),n&&t.add(n),t.add(r),o&&t.add(o),[...t]}var fe=new Set(["C","Other","Cc","Control","cntrl","Cf","Format","Cn","Unassigned","Co","Private_Use","Cs","Surrogate","L","Letter","LC","Cased_Letter","Ll","Lowercase_Letter","Lm","Modifier_Letter","Lo","Other_Letter","Lt","Titlecase_Letter","Lu","Uppercase_Letter","M","Mark","Combining_Mark","Mc","Spacing_Mark","Me","Enclosing_Mark","Mn","Nonspacing_Mark","N","Number","Nd","Decimal_Number","digit","Nl","Letter_Number","No","Other_Number","P","Punctuation","punct","Pc","Connector_Punctuation","Pd","Dash_Punctuation","Pe","Close_Punctuation","Pf","Final_Punctuation","Pi","Initial_Punctuation","Po","Other_Punctuation","Ps","Open_Punctuation","S","Symbol","Sc","Currency_Symbol","Sk","Modifier_Symbol","Sm","Math_Symbol","So","Other_Symbol","Z","Separator","Zl","Line_Separator","Zp","Paragraph_Separator","Zs","Space_Separator","ASCII","ASCII_Hex_Digit","AHex","Alphabetic","Alpha","Any","Assigned","Bidi_Control","Bidi_C","Bidi_Mirrored","Bidi_M","Case_Ignorable","CI","Cased","Changes_When_Casefolded","CWCF","Changes_When_Casemapped","CWCM","Changes_When_Lowercased","CWL","Changes_When_NFKC_Casefolded","CWKCF","Changes_When_Titlecased","CWT","Changes_When_Uppercased","CWU","Dash","Default_Ignorable_Code_Point","DI","Deprecated","Dep","Diacritic","Dia","Emoji","Emoji_Component","EComp","Emoji_Modifier","EMod","Emoji_Modifier_Base","EBase","Emoji_Presentation","EPres","Extended_Pictographic","ExtPict","Extender","Ext","Grapheme_Base","Gr_Base","Grapheme_Extend","Gr_Ext","Hex_Digit","Hex","IDS_Binary_Operator","IDSB","IDS_Trinary_Operator","IDST","ID_Continue","IDC","ID_Start","IDS","Ideographic","Ideo","Join_Control","Join_C","Logical_Order_Exception","LOE","Lowercase","Lower","Math","Noncharacter_Code_Point","NChar","Pattern_Syntax","Pat_Syn","Pattern_White_Space","Pat_WS","Quotation_Mark","QMark","Radical","Regional_Indicator","RI","Sentence_Terminal","STerm","Soft_Dotted","SD","Terminal_Punctuation","Term","Unified_Ideograph","UIdeo","Uppercase","Upper","Variation_Selector","VS","White_Space","space","XID_Continue","XIDC","XID_Start","XIDS"]),ge=new Map;for(let e of fe)ge.set(j(e),e);var Rt=new Set(["Basic_Emoji","Emoji_Keycap_Sequence","RGI_Emoji","RGI_Emoji_Flag_Sequence","RGI_Emoji_Modifier_Sequence","RGI_Emoji_Tag_Sequence","RGI_Emoji_ZWJ_Sequence"]),he=new Map;for(let e of Rt)he.set(j(e),e);var Le=new Set("Dogr Dogra Gong Gunjala_Gondi Hanifi_Rohingya Maka Makasar Medefaidrin Medf Old_Sogdian Rohg Sogd Sogdian Sogo Extended_Pictographic Elym Elymaic Hmnp Nand Nandinagari Nyiakeng_Puachue_Hmong Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi EBase EComp EMod EPres ExtPict Cpmn Cypro_Minoan Old_Uyghur Ougr Tangsa Tnsa Toto Vith Vithkuqi Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz".split(" ")),Tt=new Map([["s",w(383)],[w(383),"s"]]),Ot=new Map([[w(223),w(7838)],[w(107),w(8490)],[w(229),w(8491)],[w(969),w(8486)]]),Mt=new Map([v(453),v(456),v(459),v(498),...le(8072,8079),...le(8088,8095),...le(8104,8111),v(8124),v(8140),v(8188)]),J=new Map([["alnum",f`[\p{Alpha}\p{Nd}]`],["alpha",f`\p{Alpha}`],["ascii",f`\p{ASCII}`],["blank",f`[\p{Zs}\t]`],["cntrl",f`\p{cntrl}`],["digit",f`\p{Nd}`],["graph",f`[\P{space}&&\P{cntrl}&&\P{Cn}&&\P{Cs}]`],["lower",f`\p{Lower}`],["print",f`[[\P{space}&&\P{cntrl}&&\P{Cn}&&\P{Cs}]\p{Zs}]`],["punct",f`[\p{P}\p{S}]`],["space",f`\p{space}`],["upper",f`\p{Upper}`],["word",f`[\p{Alpha}\p{M}\p{Nd}\p{Pc}]`],["xdigit",f`\p{AHex}`]]),Re=new Set(["alnum","blank","graph","print","word","xdigit"]);function Ut(e,t){let r=[];for(let s=e;s<=t;s++)r.push(s);return r}function j(e){return e.replace(/[- _]+/g,"").toLowerCase()}function v(e){let t=w(e);return[t.toLowerCase(),t]}function le(e,t){return Ut(e,t).map(r=>v(r))}var de=new Set(["Lower","Lowercase","Upper","Uppercase","Ll","Lowercase_Letter","Lt","Titlecase_Letter","Lu","Uppercase_Letter"]);var g={Alternator:"Alternator",Assertion:"Assertion",Backreference:"Backreference",Character:"Character",CharacterClassClose:"CharacterClassClose",CharacterClassHyphen:"CharacterClassHyphen",CharacterClassIntersector:"CharacterClassIntersector",CharacterClassOpen:"CharacterClassOpen",CharacterSet:"CharacterSet",Directive:"Directive",GroupClose:"GroupClose",GroupOpen:"GroupOpen",Subroutine:"Subroutine",Quantifier:"Quantifier",VariableLengthCharacterSet:"VariableLengthCharacterSet",EscapedNumber:"EscapedNumber"},A={any:"any",digit:"digit",dot:"dot",hex:"hex",non_newline:"non_newline",posix:"posix",property:"property",space:"space",word:"word"},K={flags:"flags",keep:"keep"},_={atomic:"atomic",capturing:"capturing",group:"group",lookahead:"lookahead",lookbehind:"lookbehind"},Te=new Map([["a",7],["b",8],["e",27],["f",12],["n",10],["r",13],["t",9],["v",11]]),Ue=f`\[\^?\]?`,De=`c.? | C(?:-.?)?|${f`[pP]\{(?:\^?[\x20\w]+\})?`}|${f`x[89A-Fa-f]\p{AHex}(?:\\x[89A-Fa-f]\p{AHex})*`}|${f`u(?:\p{AHex}{4})? | x\{[^\}]*\}? | x\p{AHex}{0,2}`}|${f`o\{[^\}]*\}?`}|${f`\d{1,3}`}`,Be=/[?*+][?+]?|\{(?:\d+(?:,\d*)?|,\d+)\}\??/,Y=new RegExp(f`
  \\ (?:
    ${De}
    | [gk]<[^>]*>?
    | [gk]'[^']*'?
    | .
  )
  | \( (?: \? (?:
    [:=!>(~]
    | <[=!]
    | <[^>]*>
    | '[^']*'
    | # (?:[^)\\] | \\.?)*
    | [imx\-]+[:)]
  )?)?
  | ${Be.source}
  | ${Ue}
  | .
`.replace(/\s+/g,""),"gsu"),Ce=new RegExp(f`
  \\ (?:
    ${De}
    | .
  )
  | \[:[^:]*:\]
  | ${Ue}
  | &&
  | .
`.replace(/\s+/g,""),"gsu");function H(e,t=""){if(typeof e!="string")throw new Error("String expected as pattern");if(!/^[imx]*$/.test(t))throw new Error(`Flags "${t}" unsupported in Oniguruma`);let r=[t.includes("x")],s={getCurrentModX:()=>r.at(-1),numOpenGroups:0,popModX(){r.pop()},pushModX(u){r.push(u)},replaceCurrentModX(u){r[r.length-1]=u}},n=[],o;for(Y.lastIndex=0;o=Y.exec(e);){let u=Dt(s,e,o[0],Y.lastIndex);u.tokens?n.push(...u.tokens):u.token&&n.push(u.token),u.lastIndex!==void 0&&(Y.lastIndex=u.lastIndex)}let a=[],i=0;n.forEach(u=>{u.type===g.GroupOpen&&(u.kind===_.capturing?(i++,u.number=i):u.raw==="("&&a.push(u))}),i||a.forEach((u,p)=>{u.kind=_.capturing,u.number=p+1});let c=i||a.length;return n=n.map(u=>u.type===g.EscapedNumber?zt(u,c):u).flat(),{tokens:n,flags:{ignoreCase:t.includes("i"),dotAll:t.includes("m"),extended:t.includes("x")}}}function Dt(e,t,r,s){let[n,o,a]=r;if(n==="["){let i=Bt(t,r,s);return{tokens:i.tokens,lastIndex:i.lastIndex}}if(n==="\\"){if("AbBGzZ".includes(o))return{token:m(g.Assertion,r,{kind:r})};if(/^\\g[<']/.test(r)){if(!/^\\g(?:<[^>]+>|'[^']+')$/.test(r))throw new Error(`Invalid group name "${r}"`);return{token:m(g.Subroutine,r)}}if(/^\\k[<']/.test(r)){if(!/^\\k(?:<[^>]+>|'[^']+')$/.test(r))throw new Error(`Invalid group name "${r}"`);return{token:m(g.Backreference,r)}}if(o==="K")return{token:m(g.Directive,r,{kind:K.keep})};if(o==="N")return{token:m(g.CharacterSet,r,{kind:A.non_newline})};if(o==="O")return{token:m(g.CharacterSet,r,{kind:A.any})};if("RX".includes(o))return{token:m(g.VariableLengthCharacterSet,r,{kind:r})};if("yY".includes(o))throw new Error(`Unsupported grapheme boundary "${r}"`);let i=Ve(r,{inCharClass:!1});return Array.isArray(i)?{tokens:i}:{token:i}}if(n==="("){if(a==="#"){if(t[s]!==")")throw new Error('Unclosed comment group "(?#"');return{lastIndex:s+1}}if("-imx".includes(a))return{token:Kt(r,e)};if(e.pushModX(e.getCurrentModX()),e.numOpenGroups++,r==="("||r==="(?:")return{token:m(g.GroupOpen,r,{kind:_.group})};if(r==="(?>")return{token:m(g.GroupOpen,r,{kind:_.atomic})};if(r==="(?="||r==="(?!"||r==="(?<="||r==="(?<!")return{token:m(g.GroupOpen,r,{kind:a==="<"?_.lookbehind:_.lookahead,negate:r.endsWith("!")})};if(a==="<"||a==="'")return{token:m(g.GroupOpen,r,{kind:_.capturing,name:r.slice(3,-1)})};throw a==="("?new Error(`Unsupported conditional "${r}"`):a==="~"?new Error(`Unsupported absence operator "${r}"`):r==="(?"?new Error("Invalid group"):new Error(`Unexpected group "${r}"`)}if(r===")"){if(e.popModX(),e.numOpenGroups--,e.numOpenGroups<0)throw new Error('Unmatched ")"');return{token:m(g.GroupClose,r)}}if(r==="#"&&e.getCurrentModX()){let i=t.indexOf(`
`,s);return{lastIndex:i===-1?t.length:i}}if(/^\s$/.test(r)&&e.getCurrentModX()){let i=/\s+/y;return i.lastIndex=s,{lastIndex:i.exec(t)?i.lastIndex:s}}return r==="."?{token:m(g.CharacterSet,r,{kind:A.dot})}:r==="^"||r==="$"?{token:m(g.Assertion,r,{kind:r})}:r==="|"?{token:m(g.Alternator,r)}:Be.test(r)?{token:Ht(r)}:(je(r),{token:m(g.Character,r,{value:r.codePointAt(0)})})}function Bt(e,t,r){Me(t);let s=[m(g.CharacterClassOpen,t,{negate:t[1]==="^"})],n=1,o;for(Ce.lastIndex=r;o=Ce.exec(e);){let a=o[0];if(a[0]==="["&&a[1]!==":")Me(a),n++,s.push(m(g.CharacterClassOpen,a,{negate:a[1]==="^"}));else if(a==="]"){if(n--,s.push(m(g.CharacterClassClose,a)),!n)break}else{let i=Vt(a);Array.isArray(i)?s.push(...i):s.push(i)}}return{tokens:s,lastIndex:Ce.lastIndex||e.length}}function Vt(e){if(e[0]==="\\")return Ve(e,{inCharClass:!0});if(e[0]==="["){let t=/\[:(?<negate>\^?)(?<name>[a-z]+):\]/.exec(e);if(!t||!J.get(t.groups.name))throw new Error(`Invalid POSIX class "${e}"`);return m(g.CharacterSet,e,{kind:A.posix,negate:!!t.groups.negate,value:t.groups.name})}return e==="-"?m(g.CharacterClassHyphen,e):e==="&&"?m(g.CharacterClassIntersector,e):(je(e),m(g.Character,e,{value:e.codePointAt(0)}))}function Ve(e,{inCharClass:t}){let r=e[1];if(r==="c"||r==="C")return jt(e);if("dDhHsSwW".includes(r))return Qt(e);if(e.startsWith(f`\o{`))throw new Error(`Incomplete, invalid, or unsupported octal code point "${e}"`);if(/^\\[pP]\{/.test(e)){if(e.length===3)throw new Error("Incomplete or invalid Unicode property");return Wt(e)}if(/^\\x[89A-Fa-f]\p{AHex}/u.test(e))try{let s=e.split(/\\x/).slice(1).map(i=>parseInt(i,16)),n=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}).decode(new Uint8Array(s)),o=new TextEncoder;return[...n].map(i=>{let c=[...o.encode(i)].map(u=>`\\x${u.toString(16)}`).join("");return m(g.Character,c,{value:i.codePointAt(0)})})}catch{throw new Error(`Too short or invalid multibyte code "${e}"`)}if(r==="u"||r==="x")return m(g.Character,e,{value:qt(e)});if(Te.has(r))return m(g.Character,e,{value:Te.get(r)});if(/\d/.test(r))return m(g.EscapedNumber,e,{inCharClass:t});if(e==="\\")throw new Error(f`Incomplete escape "\"`);if(r==="M")throw new Error(`Unsupported meta "${e}"`);if([...e].length===2)return m(g.Character,e,{value:e.codePointAt(1)});throw new Error(`Unexpected escape "${e}"`)}function m(e,t,r){return{type:e,raw:t,...r}}function jt(e){let t=e[1]==="c"?e[2]:e[3];if(!t||!/[A-Za-z]/.test(t))throw new Error(`Unsupported control character "${e}"`);return m(g.Character,e,{value:t.toUpperCase().codePointAt(0)-64})}function Kt(e,t){let{on:r,off:s}=/^\(\?(?<on>[imx]*)(?:-(?<off>[imx\-]*))?/.exec(e).groups;s??="";let n=(t.getCurrentModX()||r.includes("x"))&&!s.includes("x"),o=Oe(r),a=Oe(s),i={};if(o&&(i.enable=o),a&&(i.disable=a),e.endsWith(")"))return t.replaceCurrentModX(n),m(g.Directive,e,{kind:K.flags,flags:i});if(e.endsWith(":")){t.pushModX(n),t.numOpenGroups++;let c=m(g.GroupOpen,e,{kind:_.group});return(o||a)&&(c.flags=i),c}throw new Error(`Unexpected flag modifier "${e}"`)}function Ht(e){let t={};if(e[0]==="{"){let{min:r,max:s}=/^\{(?<min>\d*)(?:,(?<max>\d*))?/.exec(e).groups,n=1e5;if(+r>n||+s>n)throw new Error("Quantifier value unsupported in Oniguruma");t.min=+r,t.max=s===void 0?+r:s===""?1/0:+s,t.greedy=!e.endsWith("?"),t.possessive=!1}else t.min=e[0]==="+"?1:0,t.max=e[0]==="?"?1:1/0,t.greedy=e[1]!=="?",t.possessive=e[1]==="+";return m(g.Quantifier,e,t)}function Qt(e){let t=e[1].toLowerCase();return m(g.CharacterSet,e,{kind:{d:A.digit,h:A.hex,s:A.space,w:A.word}[t],negate:e[1]!==t})}function Wt(e){let{p:t,neg:r,value:s}=/^\\(?<p>[pP])\{(?<neg>\^?)(?<value>[ \w]+)/.exec(e).groups,n=t==="P"&&!r||t==="p"&&!!r;return m(g.CharacterSet,e,{kind:A.property,negate:n,value:s})}function Oe(e){let t={};return e.includes("i")&&(t.ignoreCase=!0),e.includes("m")&&(t.dotAll=!0),e.includes("x")&&(t.extended=!0),Object.keys(t).length?t:null}function qt(e){if(/^(?:\\u(?!\p{AHex}{4})|\\x(?!\p{AHex}{1,2}|\{\p{AHex}{1,8}\}))/u.test(e))throw new Error(`Incomplete or invalid escape "${e}"`);let t=e[2]==="{"?/^\\x\{\s*(?<hex>\p{AHex}+)/u.exec(e).groups.hex:e.slice(2),r=parseInt(t,16);if(r>1310719)throw new Error(`Invalid out of range "${e}"`);if(r>1114111)throw new Error(`Invalid out of range in JS "${e}"`);return r}function zt(e,t){let{raw:r,inCharClass:s}=e,n=r.slice(1);if(!s&&(n!=="0"&&n.length===1||n[0]!=="0"&&+n<=t))return[m(g.Backreference,r)];let o=[],a=n.match(/^[0-7]+|\d/g);for(let i=0;i<a.length;i++){let c=a[i],u;if(i===0&&c!=="8"&&c!=="9"){if(u=parseInt(c,8),u>127)throw new Error(f`Octal encoded byte above 177 unsupported "${r}"`)}else u=c.codePointAt(0);o.push(m(g.Character,(i===0?"\\":"")+c,{value:u}))}return o}function Me(e){if(e.endsWith("]"))throw new Error(`Empty character class "${e}" unsupported in Oniguruma`)}function je(e){if([...e].length!==1)throw new Error(`Expected "${e}" to be a single code point`)}function N(e,t,r){let s=e.node;for(;s.parent;)s=s.parent;function n(a,i){for(let c=0;c<a.length;c++){let u=o(a[c],i,c,a);c=Math.max(-1,c+u)}}function o(a,i=null,c=null,u=null){let p=0,C=!1,d={node:a,parent:i,key:c,container:u,ast:s,remove(){x(u,"Container expected").splice(Math.max(0,c+p),1),p-=1},removeAllNextSiblings(){return x(u,"Container expected").splice(c+1)},removeAllPrevSiblings(){let b=c+p;return p-=b,x(u,"Container expected").splice(0,Math.max(0,b))},replaceWith(b){Xt(b,i),u?u[Math.max(0,c+p)]=b:i[c]=b},skip(){C=!0}},h=Ke(a).find(b=>!!r[b]),S=h&&r[h],L=typeof S=="function"?S:S?.enter,T=S?.exit;if(L?.(d,t),!C)switch(a.type){case l.Regex:o(a.pattern,a,"pattern"),o(a.flags,a,"flags");break;case l.Alternative:case l.CharacterClass:n(a.elements,a);break;case l.Assertion:$(a)&&n(a.alternatives,a);break;case l.Backreference:case l.Character:case l.CharacterSet:case l.Directive:case l.Flags:case l.Recursion:case l.Subroutine:case l.VariableLengthCharacterSet:break;case l.CapturingGroup:case l.Group:case l.Pattern:n(a.alternatives,a);break;case l.CharacterClassIntersection:n(a.classes,a);break;case l.CharacterClassRange:o(a.min,a,"min"),o(a.max,a,"max");break;case l.Quantifier:o(a.element,a,"element");break;default:throw new Error(`Unexpected node type "${a.type}"`)}return T?.(d,t),p}o(e.node,e.parent,e.key,e.container)}function Xt(e,t){"parent"in t&&(e.parent=t)}var l={Alternative:"Alternative",Assertion:"Assertion",Backreference:"Backreference",CapturingGroup:"CapturingGroup",Character:"Character",CharacterClass:"CharacterClass",CharacterClassIntersection:"CharacterClassIntersection",CharacterClassRange:"CharacterClassRange",CharacterSet:"CharacterSet",Directive:"Directive",Flags:"Flags",Group:"Group",Pattern:"Pattern",Quantifier:"Quantifier",Regex:"Regex",Subroutine:"Subroutine",VariableLengthCharacterSet:"VariableLengthCharacterSet",Recursion:"Recursion"},He={AnyGroup:"AnyGroup",AnyNode:"AnyNode"};function Ke(e){let{type:t}=e,r=[He.AnyNode];return($(e)||t===l.CapturingGroup||t===l.Group)&&r.push(He.AnyGroup),r.push(t),r}var E={line_end:"line_end",line_start:"line_start",lookahead:"lookahead",lookbehind:"lookbehind",search_start:"search_start",string_end:"string_end",string_end_newline:"string_end_newline",string_start:"string_start",word_boundary:"word_boundary"},k=A,W=K,Q={grapheme:"grapheme",newline:"newline"};function q({tokens:e,flags:t},r){let s={skipBackrefValidation:!1,skipPropertyNameValidation:!1,verbose:!1,...r},n={capturingGroups:[],current:0,hasNumberedRef:!1,namedGroupsByName:new Map,parent:null,skipBackrefValidation:s.skipBackrefValidation,skipPropertyNameValidation:s.skipPropertyNameValidation,subroutines:[],token:null,tokens:e,verbose:s.verbose,walk:o};function o(d,h){let S=e[n.current];switch(n.parent=d,n.token=S,n.current++,S.type){case g.Alternator:return P();case g.Assertion:return qe(S);case g.Backreference:return Zt(n);case g.Character:return ze(S.value);case g.CharacterClassHyphen:return Jt(n,h);case g.CharacterClassOpen:return Yt(n,h);case g.CharacterSet:return er(n);case g.Directive:return ir(S);case g.GroupOpen:return tr(n,h);case g.Quantifier:return rr(n);case g.Subroutine:return nr(n);case g.VariableLengthCharacterSet:return gr(S.kind);default:throw new Error(`Unexpected token type "${S.type}"`)}}let a=pr(ur(),cr(t)),i=a.pattern.alternatives[0];for(;n.current<e.length;){let d=o(i,{});d.type===l.Alternative?(a.pattern.alternatives.push(d),i=d):i.elements.push(d)}let{capturingGroups:c,hasNumberedRef:u,namedGroupsByName:p,subroutines:C}=n;if(u&&p.size)throw new Error("Numbered backref/subroutine not allowed when using named capture");for(let{ref:d}of C)if(typeof d=="number"){if(d>c.length)throw new Error("Subroutine uses a group number that's not defined")}else if(p.has(d)){if(p.get(d).length>1)throw new Error(f`Subroutine uses a duplicate group name "\g<${d}>"`)}else throw new Error(f`Subroutine uses a group name that's not defined "\g<${d}>"`);return N({node:a},null,{AnyNode({node:d,parent:h}){d.parent=h}}),a}function Zt(e){let{raw:t}=e.token,r=/^\\k[<']/.test(t),s=r?t.slice(3,-1):t.slice(1),n=(o,a=!1)=>{let i=e.capturingGroups.length,c=!1;if(o>i)if(e.skipBackrefValidation)c=!0;else throw new Error(`Not enough capturing groups defined to the left "${t}"`);return e.hasNumberedRef=!0,ee(a?i+1-o:o,{orphan:c})};if(r){let o=/^(?<sign>-?)0*(?<num>[1-9]\d*)$/.exec(s);if(o)return n(+o.groups.num,!!o.groups.sign);if(/[-+]/.test(s))throw new Error(`Invalid backref name "${t}"`);if(!e.namedGroupsByName.has(s))throw new Error(`Group name not defined to the left "${t}"`);return ee(s)}return n(+s)}function Jt(e,t){let{parent:r,tokens:s,walk:n}=e,o=r.elements.at(-1),a=s[e.current];if(o&&o.type!==l.CharacterClass&&o.type!==l.CharacterClassRange&&a&&a.type!==g.CharacterClassOpen&&a.type!==g.CharacterClassClose&&a.type!==g.CharacterClassIntersector){let i=n(r,t);if(o.type===l.Character&&i.type===l.Character)return r.elements.pop(),or(o,i);throw new Error("Invalid character class range")}return ze(45)}function Yt(e,t){let{token:r,tokens:s,verbose:n,walk:o}=e,a=me({negate:r.negate}),i=a.elements[0],c=Qe(s[e.current]);for(;c.type!==g.CharacterClassClose;){if(c.type===g.CharacterClassIntersector)i.classes.push(me({negate:!1,baseOnly:!0})),e.current++;else{let u=i.classes.at(-1);u.elements.push(o(u,t))}c=Qe(s[e.current])}if(n||mr(i),i.classes.length===1){let u=i.classes[0];u.negate=a.negate!==u.negate,a=u}return e.current++,a}function er({token:e,skipPropertyNameValidation:t}){let{kind:r,negate:s,value:n}=e;if(r===A.property){let a=j(n);if(Re.has(a))r=A.posix,n=a;else return re(n,{negate:s,skipPropertyNameValidation:t})}let o={type:l.CharacterSet,kind:x(k[r],`Unexpected character set kind "${r}"`)};return(r===A.digit||r===A.hex||r===A.posix||r===A.space||r===A.word)&&(o.negate=s,r===A.posix&&(o.value=n)),o}function tr(e,t){let{token:r,tokens:s,capturingGroups:n,namedGroupsByName:o,verbose:a,walk:i}=e,c=sr(r);c.type===l.CapturingGroup&&(n.push(c),c.name&&M(o,c.name,[]).push(c));let u=We(s[e.current]);for(;u.type!==g.GroupClose;){if(u.type===g.Alternator)c.alternatives.push(P()),e.current++;else{let p=c.alternatives.at(-1);p.elements.push(i(p,t))}u=We(s[e.current])}return a||(c=dr(c)),e.current++,c}function rr({token:e,parent:t}){let{min:r,max:s,greedy:n,possessive:o}=e,a=t.elements.at(-1);if(!a||a.type===l.Assertion||a.type===l.Directive)throw new Error("Quantifier requires a repeatable token");let i=lr(a,r,s,n,o);return t.elements.pop(),i}function nr(e){let{token:t,capturingGroups:r,subroutines:s}=e,n=t.raw.slice(3,-1),o=/^(?<sign>[-+]?)0*(?<num>[1-9]\d*)$/.exec(n);if(o){let i=+o.groups.num,c=r.length;if(e.hasNumberedRef=!0,n={"":i,"+":c+i,"-":c+1-i}[o.groups.sign],n<1)throw new Error("Invalid subroutine number")}else n==="0"&&(n=0);let a=fr(n);return s.push(a),a}function P(){return{type:l.Alternative,elements:[]}}function qe({type:e,kind:t,negate:r}){if(e===g.GroupOpen)return te({behind:t===_.lookbehind,negate:r});let s=x({"^":E.line_start,$:E.line_end,"\\A":E.string_start,"\\b":E.word_boundary,"\\B":E.word_boundary,"\\G":E.search_start,"\\z":E.string_end,"\\Z":E.string_end_newline}[t],`Unexpected assertion kind "${t}"`),n={type:l.Assertion,kind:s};return s===E.word_boundary&&(n.negate=t===f`\B`),n}function ee(e,t){let r=!!t?.orphan;return{type:l.Backreference,...r&&{orphan:r},ref:e}}function sr(e){let{kind:t,number:r,name:s,flags:n}=e;switch(t){case _.atomic:return I({atomic:!0});case _.capturing:return Ee(r,s);case _.group:return I({flags:n});case _.lookahead:case _.lookbehind:return qe(e);default:throw new Error(`Unexpected group kind "${t}"`)}}function Ee(e,t){let r=t!==void 0;if(r&&!Cr(t))throw new Error(`Group name "${t}" invalid in Oniguruma`);return{type:l.CapturingGroup,number:e,...r&&{name:t},alternatives:[P()]}}function ze(e){return{type:l.Character,value:e}}function me(e){let t={baseOnly:!1,negate:!1,...e};return{type:l.CharacterClass,negate:t.negate,elements:t.baseOnly?[]:[ar()]}}function ar(){return{type:l.CharacterClassIntersection,classes:[me({negate:!1,baseOnly:!0})]}}function or(e,t){if(t.value<e.value)throw new Error("Character class range out of order");return{type:l.CharacterClassRange,min:e,max:t}}function ir({kind:e,flags:t}){let r={type:l.Directive,kind:x(W[e],`Unexpected directive kind "${e}"`)};return e===K.flags&&(r.flags=t),r}function cr({ignoreCase:e,dotAll:t,extended:r}){return{type:l.Flags,ignoreCase:e,dotAll:t,extended:r}}function I(e){let t=e?.atomic,r=e?.flags;return{type:l.Group,...t&&{atomic:t},...r&&{flags:r},alternatives:[P()]}}function te(e){let t={behind:!1,negate:!1,...e};return{type:l.Assertion,kind:t.behind?E.lookbehind:E.lookahead,negate:t.negate,alternatives:[P()]}}function ur(){return{type:l.Pattern,alternatives:[P()]}}function lr(e,t,r,s,n){if(r<t)throw new Error("Quantifier range out of order");return{type:l.Quantifier,min:t,max:r,greedy:s,possessive:n,element:e}}function pr(e,t){return{type:l.Regex,pattern:e,flags:t}}function fr(e){return{type:l.Subroutine,ref:e}}function re(e,t){let r={negate:!1,skipPropertyNameValidation:!1,...t};return{type:l.CharacterSet,kind:k.property,value:r.skipPropertyNameValidation?e:hr(e),negate:r.negate}}function gr(e){return{type:l.VariableLengthCharacterSet,kind:x({"\\R":Q.newline,"\\X":Q.grapheme}[e],`Unexpected varcharset kind "${e}"`)}}function hr(e){let t=j(e);if(he.has(t))throw new Error(f`Unicode property "\p{${e}}" unsupported in Oniguruma`);let r=ge.get(t);return r||e.trim().replace(/\s+/g,"_").replace(/[A-Z][a-z]+(?=[A-Z])/g,"$&_").replace(/[A-Za-z]+/g,s=>s[0].toUpperCase()+s.slice(1).toLowerCase())}function dr(e){let t=e.alternatives[0].elements[0];return e.type===l.Group&&B(e,r=>r.type===l.Group)&&!(e.atomic&&t.flags)&&!(e.flags&&(t.atomic||t.flags))?(e.atomic?t.atomic=!0:e.flags&&(t.flags=e.flags),t):e}function $({type:e,kind:t}){return e===l.Assertion&&(t===E.lookahead||t===E.lookbehind)}function Cr(e){return!/^(?:[-\d]|$)/.test(e)}function mr(e){for(let t=0;t<e.classes.length;t++){let r=e.classes[t],s=r.elements[0];r.elements.length===1&&s.type===l.CharacterClass&&(e.classes[t]=s,s.negate=r.negate!==s.negate)}}function Qe(e){return x(e,"Unclosed character class")}function We(e){return x(e,"Unclosed group")}function Xe(e){let t=e.pattern.alternatives,r=t[0].elements[0];if(t.length>1||!r)return null;let s=B(e.pattern,a=>a.type===l.CapturingGroup||a.type===l.Group)&&r.alternatives.length===1,n=s?r.alternatives[0]:t[0],o=s?n.elements[0]:r;if(!o)return null;if((o.type===l.CapturingGroup||o.type===l.Group)&&o.alternatives.length===2&&o.alternatives[0].elements.length===1&&o.alternatives[1].elements.length===1){let a=o.alternatives[0].elements[0],i=o.alternatives[1].elements[0];if(a.kind===E.line_start&&i.kind===E.search_start||a.kind===E.search_start&&i.kind===E.line_start)return a.kind===E.line_start?o.alternatives.pop():o.alternatives.shift(),"line_or_search_start"}if(ne(o,{negate:!0}))return o.parent.elements.shift(),"not_search_start";for(let a=0;a<n.elements.length;a++){let i=n.elements[a];if(!we(i))break;if(ne(i,{negate:!0}))return n.elements.splice(a,1),"not_search_start"}return null}function ne(e,t){return $(e)&&e.negate===t.negate&&B(e,r=>r.kind===E.search_start)}function we(e){return e.type===l.Assertion||e.type===l.Directive||e.type===l.Quantifier&&!e.min}var Se=String.raw,Ze=Se`(?:\p{Emoji}\uFE0F\u20E3?|\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation})`,Je=Se`\u{E0061}-\u{E007A}`,Ye=()=>new RegExp(Se`[\u{1F1E6}-\u{1F1FF}]{2}|\u{1F3F4}[${Je}]{2}[\u{E0030}-\u{E0039}${Je}]{1,3}\u{E007F}|${Ze}(?:\u200D${Ze})*`,"gu");function tt(e,t){let r={accuracy:"default",avoidSubclass:!1,bestEffortTarget:"ES2025",...t},s=r.avoidSubclass?null:Xe(e),n={accuracy:r.accuracy,flagDirectivesByAlt:new Map,minTargetEs2024:V(r.bestEffortTarget,"ES2024"),subroutineRefMap:new Map,supportedGNodes:new Set};N({node:e},n,rt);let o={dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},a={currentFlags:o,prevFlags:null,globalFlags:o,groupOriginByCopy:new Map,groupsByName:new Map,multiplexCapturesToLeftByRef:new Map,openRefs:new Map,reffedNodesByReferencer:new Map,subroutineRefMap:n.subroutineRefMap};N({node:e},a,nt);let i={groupsByName:a.groupsByName,highestOrphanBackref:0,numCapturesToLeft:0,reffedNodesByReferencer:a.reffedNodesByReferencer};return N({node:e},i,Er),s&&(e._strategy=s),e}var rt={Alternative:{enter({node:e,parent:t,key:r},{flagDirectivesByAlt:s}){let n=e.elements.filter(o=>o.kind===W.flags);for(let o=r+1;o<t.alternatives.length;o++){let a=t.alternatives[o];M(s,a,[]).push(...n)}},exit({node:e},{flagDirectivesByAlt:t}){if(t.get(e)?.length){let r=ot(t.get(e));if(r){let s=z(I({flags:r}),e.elements);s.parent=e,e.elements=[s]}}}},Assertion({node:e,ast:t,remove:r,replaceWith:s},{accuracy:n,supportedGNodes:o}){let{kind:a,negate:i}=e;if(a===E.line_end)s(F(f`(?=\z|\n)`));else if(a===E.line_start)s(F(f`(?<=\A|\n)`));else if(a===E.search_start){if(!o.has(e)&&n!=="loose")throw new Error(f`Uses "\G" in a way that's unsupported`);t.flags.sticky=!0,r()}else if(a===E.string_end_newline)s(F(f`(?=\n?\z)`));else if(a===E.word_boundary){let c=f`[\p{L}\p{N}\p{Pc}]`,u=`(?:(?<=${c})(?!${c})|(?<!${c})(?=${c}))`,p=`(?:(?<=${c})(?=${c})|(?<!${c})(?!${c}))`;s(F(i?p:u))}},CapturingGroup({node:e},{subroutineRefMap:t}){let{name:r,number:s}=e;if(r&&!_r(r))throw new Error(`Group name "${r}" invalid in JS`);t.set(r??s,e)},CharacterSet({node:e,replaceWith:t},{accuracy:r,minTargetEs2024:s}){let{kind:n,negate:o,value:a}=e;if(n===k.any)t(re("Any"));else if(n===k.hex)t(re("AHex",{negate:o}));else if(n===k.non_newline)t(F(f`[^\n]`));else if(n===k.posix)if(!s&&(a==="graph"||a==="print")){if(r==="strict")throw new Error(`POSIX class "${a}" requires min target ES2024 or non-strict accuracy`);let i={graph:"!-~",print:" -~"}[a];o&&(i=`\0-${w(i.codePointAt(0)-1)}${w(i.codePointAt(2)+1)}-\u{10FFFF}`),t(F(`[${i}]`))}else{let i=F(J.get(a));i.negate=o,t(i)}else if(n===k.property)fe.has(a)||(e.key="sc");else if(n===k.space){let i=F(`[ 	
\v\f\r]`);i.negate=o,t(i)}},Directive(e,t){let{node:r,parent:s,ast:n,remove:o,replaceWith:a,removeAllPrevSiblings:i,removeAllNextSiblings:c}=e,{kind:u,flags:p}=r;if(u===W.flags)if(!p.enable&&!p.disable)o();else{let C=z(I({flags:p}),c());a(C),lt(C,e,t,rt)}else if(u===W.keep){if(s.parent!==n.pattern||n.pattern.alternatives.length>1)throw new Error(f`Uses "\K" in a way that's unsupported`);a(z(te({behind:!0}),i()))}},Flags({node:e,parent:t}){delete e.extended,Object.assign(e,{global:!1,hasIndices:!1,multiline:!1,sticky:e.sticky??!1}),t.options={disable:{x:!0,n:!0},force:{v:!0}}},Group({node:e}){if(!e.flags)return;let{enable:t,disable:r}=e.flags;t?.extended&&delete t.extended,r?.extended&&delete r.extended,t?.dotAll&&r?.dotAll&&delete t.dotAll,t?.ignoreCase&&r?.ignoreCase&&delete t.ignoreCase,t&&!Object.keys(t).length&&delete e.flags.enable,r&&!Object.keys(r).length&&delete e.flags.disable,!e.flags.enable&&!e.flags.disable&&delete e.flags},Pattern({node:e},{accuracy:t,supportedGNodes:r}){let s=[],n=!1,o=!1;for(let a of e.alternatives){let i=ct(a.elements);i?(n=!0,Array.isArray(i)?s.push(...i):s.push(i)):o=!0}if(n&&o&&t!=="loose")throw new Error(f`Uses "\G" in a way that's unsupported`);s.forEach(a=>r.add(a))},Quantifier({node:e}){if(e.element.type===l.Quantifier){let t=z(I(),[e.element]);t.parent=e,e.element=t}},VariableLengthCharacterSet({node:e,replaceWith:t},{accuracy:r,minTargetEs2024:s}){let{kind:n}=e;if(n===Q.newline)t(F(`(?>\r
?|[
\v\f\x85\u2028\u2029])`));else if(n===Q.grapheme){if(r==="strict")throw new Error(f`Use of "\X" requires non-strict accuracy`);let o=s?f`\p{RGI_Emoji}`:Ye().source.replace(/\\u\{/g,"\\x{");t(F(f`(?>\r\n|${o}|\P{M}\p{M}*)`,{skipPropertyNameValidation:!0}))}else throw new Error(`Unexpected varcharset kind "${n}"`)}},nt={Backreference({node:e},{multiplexCapturesToLeftByRef:t,reffedNodesByReferencer:r}){let{orphan:s,ref:n}=e;s||r.set(e,[...t.get(n).map(({node:o})=>o)])},Recursion({node:e},{reffedNodesByReferencer:t}){let{ref:r}=e,s=e.parent;for(;(s=s.parent)&&!(s.type===l.CapturingGroup&&(s.name===r||s.number===r)););t.set(e,s)},CapturingGroup:{enter({node:e,replaceWith:t,skip:r},{groupOriginByCopy:s,groupsByName:n,multiplexCapturesToLeftByRef:o,openRefs:a,reffedNodesByReferencer:i}){let c=s.get(e),u=e.name??e.number;if(c&&a.has(u)){let C=et(u);i.set(C,a.get(u)),t(C),r();return}a.set(u,e);let p=M(o,u,[]);for(let C=0;C<p.length;C++){let d=p[C];if(c===d.node||c&&c===d.origin||e===d.origin){p.splice(C,1);break}}if(p.push({node:e,origin:c}),e.name){let C=M(n,e.name,new Map);for(let d of C.values())!d.hasDuplicateNameToRemove&&st(d.node,e,{ancestorsParticipate:!0})&&(d.hasDuplicateNameToRemove=!0);n.get(e.name).set(e,{node:e})}},exit({node:e},{openRefs:t}){t.delete(e.name??e.number)}},Group:{enter({node:e},t){t.prevFlags=t.currentFlags,e.flags&&(t.currentFlags=O(t.currentFlags,e.flags))},exit(e,t){t.currentFlags=t.prevFlags}},Subroutine(e,t){let{node:r,replaceWith:s}=e,{ref:n}=r,o=t.subroutineRefMap.get(n),a=n===0,i=a?et(n):at(o,t.groupOriginByCopy,null),c=i;if(!a){let u=ot(Sr(o,C=>C.type===l.Group&&!!C.flags)),p=u?O(t.globalFlags,u):t.globalFlags;wr(p,t.currentFlags)||(c=z(I({flags:Ar(p)}),[i]))}s(c),a||lt(c,e,t,nt)}},Er={Backreference({node:e,replaceWith:t},r){if(e.orphan){r.highestOrphanBackref=Math.max(r.highestOrphanBackref,e.ref);return}let n=r.reffedNodesByReferencer.get(e).filter(o=>st(o,e,{ancestorsParticipate:!1}));if(!n.length)t(te({negate:!0}));else if(n.length>1){let o=n.map(a=>se(P(),[ee(a.number)]));t(se(I(),o))}else e.ref=n[0].number},CapturingGroup({node:e},t){e.number=++t.numCapturesToLeft,e.name&&t.groupsByName.get(e.name).get(e).hasDuplicateNameToRemove&&delete e.name},Recursion({node:e},t){e.ref!==0&&(e.ref=t.reffedNodesByReferencer.get(e).number)},Regex:{exit({node:e},t){let r=Math.max(t.highestOrphanBackref-t.numCapturesToLeft,0);for(let s=0;s<r;s++){let n=Ee();e.pattern.alternatives.at(-1).elements.push(n)}}}};function se(e,t){return t.forEach(r=>r.parent=e),e[Ae(e)]=t,e}function wr(e,t){return e.dotAll===t.dotAll&&e.ignoreCase===t.ignoreCase}function st(e,t,{ancestorsParticipate:r}){let s=t;do{if(s.type===l.Pattern)return!1;if(s.type===l.Alternative)continue;if(s===e)return r;let n=it(s.parent);for(let o of n){if(o===s)break;if(o===e||ut(o,e))return!0}}while(s=s.parent);throw new Error("Unexpected path")}function at(e,t,r,s){let n=Array.isArray(e)?[]:{};for(let[o,a]of Object.entries(e))o==="parent"?n.parent=Array.isArray(r)?s:r:a&&typeof a=="object"?n[o]=at(a,t,n,r):(o==="type"&&a===l.CapturingGroup&&t.set(n,t.get(e)??e),n[o]=a);return n}function et(e){return{type:l.Recursion,ref:e}}function Sr(e,t){let r=[];for(;e=e.parent;)(!t||t(e))&&r.push(e);return r}function Ae(e){for(let t of["alternatives","classes","elements"])if(e[t])return t;return null}function ot(e){let t=["dotAll","ignoreCase"],r={enable:{},disable:{}};return e.forEach(({flags:s})=>{t.forEach(n=>{s.enable?.[n]&&(delete r.disable[n],r.enable[n]=!0),s.disable?.[n]&&(r.disable[n]=!0)})}),Object.keys(r.enable).length||delete r.enable,Object.keys(r.disable).length||delete r.disable,r.enable||r.disable?r:null}function Ar({dotAll:e,ignoreCase:t}){let r={};return(e||t)&&(r.enable={},e&&(r.enable.dotAll=!0),t&&(r.enable.ignoreCase=!0)),(!e||!t)&&(r.disable={},!e&&(r.disable.dotAll=!0),!t&&(r.disable.ignoreCase=!0)),r}function it(e){if(!e)throw new Error("Node expected");if(e.type===l.Quantifier)return[e.element];let t=Ae(e);return t&&e[t]}function ct(e){let t=e.find(r=>r.kind===E.search_start||ne(r,{negate:!1})||!we(r));if(!t)return null;if(t.kind===E.search_start)return t;if($(t))return t.alternatives[0].elements[0];if(t.type===l.Group||t.type===l.CapturingGroup){let r=[];for(let s of t.alternatives){let n=ct(s.elements);if(!n)return null;Array.isArray(n)?r.push(...n):r.push(n)}return r}return null}function ut(e,t){let r=it(e)??[];for(let s of r)if(s===t||ut(s,t))return!0;return!1}function _r(e){return/^[$_\p{IDS}][$\u200C\u200D\p{IDC}]*$/u.test(e)}function F(e,t){let r=!!t?.skipPropertyNameValidation,n=q(H(e),{skipPropertyNameValidation:r}).pattern.alternatives;return n.length>1||n[0].elements.length>1?se(I(),n):n[0].elements[0]}function z(e,t){let r=Ae(e);return e[r][0].parent=e,t&&se(e[r][0],t),e}function lt(e,{parent:t,key:r,container:s},n,o){N({node:e,parent:t,key:r,container:s},n,o)}function ft(e,t){let r=Z(t),s=V(r.target,"ES2024"),n=V(r.target,"ES2025"),o=r.maxRecursionDepth;if(o!==null&&(!Number.isInteger(o)||o<2||o>100))throw new Error("Invalid maxRecursionDepth; use 2-100 or null");let a=null,i=null;if(!n){let h=[e.flags.ignoreCase];N({node:e},{getCurrentModI:()=>h.at(-1),popModI(){h.pop()},pushModI(S){h.push(S)},setHasCasedChar(){h.at(-1)?a=!0:i=!0}},kr)}let c={dotAll:e.flags.dotAll,ignoreCase:!!((e.flags.ignoreCase||a)&&!i)},u=null,p={accuracy:r.accuracy,appliedGlobalFlags:c,captureFlagIMap:new Map,currentFlags:{dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},groupNames:new Set,inCharClass:!1,lastNode:u,maxRecursionDepth:o,useAppliedIgnoreCase:!!(!n&&a&&i),useDuplicateNames:n,useFlagMods:n,useFlagV:s,usePostEs2018Properties:s,verbose:r.verbose};function C(h){switch(p.lastNode=u,u=h,h.type){case l.Regex:return{pattern:C(h.pattern),flags:C(h.flags),options:{...h.options}};case l.Alternative:return h.elements.map(C).join("");case l.Assertion:return Nr(h,p,C);case l.Backreference:return $r(h,p);case l.CapturingGroup:return Ir(h,p,C);case l.Character:return vr(h,p);case l.CharacterClass:return Pr(h,p,C);case l.CharacterClassIntersection:if(!p.useFlagV)throw new Error("Use of class intersection requires min target ES2024");return h.classes.map(C).join("&&");case l.CharacterClassRange:return Gr(h,p);case l.CharacterSet:return Lr(h,p);case l.Flags:return Rr(h,p);case l.Group:return Tr(h,p,C);case l.Pattern:return h.alternatives.map(C).join("|");case l.Quantifier:return C(h.element)+Dr(h);case l.Recursion:return Or(h,p);default:throw new Error(`Unexpected node type "${h.type}"`)}}let d=C(e);return s||(delete d.options.force.v,d.options.disable.v=!0,d.options.unicodeSetsPlugin=null),d}var kr={AnyGroup:{enter({node:e},t){let r=t.getCurrentModI();t.pushModI(e.flags?O({ignoreCase:r},e.flags).ignoreCase:r)},exit(e,t){t.popModI()}},Backreference(e,t){t.setHasCasedChar()},Character({node:e},t){_e(w(e.value))&&t.setHasCasedChar()},CharacterClassRange({node:e,skip:t},r){t(),gt(e,{firstOnly:!0}).length&&r.setHasCasedChar()},CharacterSet({node:e},t){e.kind===k.property&&de.has(e.value)&&t.setHasCasedChar()}},yr=new Set(["$","(",")","*","+",".","?","[","\\","]","^","{","|","}"]),br=new Set(["-","\\","]","^"]),xr=new Set(["(",")","-","/","[","\\","]","^","{","|","}","!","#","$","%","&","*","+",",",".",":",";","<","=",">","?","@","`","~"]),pt=new Map([[9,f`\t`],[10,f`\n`],[11,f`\v`],[12,f`\f`],[13,f`\r`],[8232,f`\u2028`],[8233,f`\u2029`],[65279,f`\uFEFF`]]),Fr=/^\p{Cased}$/u;function _e(e){return Fr.test(e)}function Nr(e,t,r){let{kind:s,negate:n,alternatives:o}=e;if($(e))return`(?${`${s===E.lookahead?"":"<"}${n?"!":"="}`}${o.map(r).join("|")})`;if(s===E.string_end)return"$";if(s===E.string_start)return"^";throw new Error(`Unexpected assertion kind "${s}"`)}function $r({ref:e},t){if(typeof e!="number")throw new Error("Unexpected named backref in transformed AST");if(!t.useFlagMods&&t.accuracy==="strict"&&t.currentFlags.ignoreCase&&!t.captureFlagIMap.get(e))throw new Error("Use of case-insensitive backref to case-sensitive group requires target ES2025 or non-strict accuracy");return"\\"+e}function Ir({name:e,number:t,alternatives:r},s,n){return e&&(s.groupNames.has(e)?s.useDuplicateNames||(e=null):s.groupNames.add(e)),s.captureFlagIMap.set(t,s.currentFlags.ignoreCase),`(${e?`?<${e}>`:""}${r.map(n).join("|")})`}function vr({value:e},t){let r=w(e),s=U(e,{isAfterBackref:t.lastNode.type===l.Backreference,inCharClass:t.inCharClass,useFlagV:t.useFlagV});if(s!==r)return s;if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase&&_e(r)){let n=pe(r);return t.inCharClass?n.join(""):n.length>1?`[${n.join("")}]`:n[0]}return r}function Pr({negate:e,parent:t,elements:r},s,n){if(!e&&(!s.useFlagV||!s.verbose)&&t.type===l.CharacterClass&&r[0].type!==l.CharacterClassIntersection||!s.verbose&&t.type===l.CharacterClassIntersection&&r.length===1&&r[0].type!==l.CharacterClassRange)return r.map(n).join("");if(!s.useFlagV&&t.type===l.CharacterClass)throw new Error("Use of nested character class requires min target ES2024");s.inCharClass=!0;let o=`[${e?"^":""}${r.map(n).join("")}]`;return s.inCharClass=!1,o}function Gr(e,t){let r=e.min.value,s=e.max.value,n={isAfterBackref:!1,inCharClass:!0,useFlagV:t.useFlagV},o=U(r,n),a=U(s,n),i="";if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase){let c=gt(e);Mr(c).forEach(p=>{i+=Array.isArray(p)?`${U(p[0],n)}-${U(p[1],n)}`:U(p,n)})}return`${o}-${a}${i}`}function Lr({kind:e,negate:t,value:r,key:s},n){if(e===k.dot)return n.currentFlags.dotAll?n.appliedGlobalFlags.dotAll||n.useFlagMods?".":"[^]":f`[^\n]`;if(e===k.digit)return t?f`\D`:f`\d`;if(e===k.property){if(!n.usePostEs2018Properties&&Le.has(r))throw new Error(`Unicode property "${r}" unavailable in target ES2018`);if(n.useAppliedIgnoreCase&&n.currentFlags.ignoreCase&&de.has(r))throw new Error(`Unicode property "${r}" can't be case-insensitive when other chars have specific case`);return`${t?f`\P`:f`\p`}{${s?`${s}=`:""}${r}}`}if(e===k.word)return t?f`\W`:f`\w`;throw new Error(`Unexpected character set kind "${e}"`)}function Rr(e,t){return(t.appliedGlobalFlags.ignoreCase?"i":"")+(e.dotAll?"s":"")+(e.sticky?"y":"")}function Tr({atomic:e,flags:t,parent:r,alternatives:s},n,o){let a=n.currentFlags;t&&(n.currentFlags=O(a,t));let i=s.map(o).join("|"),c=!n.verbose&&s.length===1&&r.type!==l.Quantifier&&!e&&(!n.useFlagMods||!t)?i:`(?${Ur(e,t,n.useFlagMods)}${i})`;return n.currentFlags=a,c}function Or({ref:e},t){let r=t.maxRecursionDepth;if(!r)throw new Error("Use of recursion disabled");if(t.accuracy==="strict")throw new Error("Use of recursion requires non-strict accuracy due to depth limit");return e===0?`(?R=${r})`:f`\g<${e}&R=${r}>`}function gt(e,t){let r=!!t?.firstOnly,s=e.min.value,n=e.max.value,o=[];if(s<65&&(n===65535||n>=131071)||s===65536&&n>=131071)return o;for(let a=s;a<=n;a++){let i=w(a);if(!_e(i))continue;let c=pe(i).filter(u=>{let p=u.codePointAt(0);return p<s||p>n});if(c.length&&(o.push(...c),r))break}return o}function U(e,{isAfterBackref:t,inCharClass:r,useFlagV:s}){if(pt.has(e))return pt.get(e);if(e<32||e>126&&e<160||e>262143||t&&Br(e))return e>255?`\\u{${e.toString(16).toUpperCase()}}`:`\\x${e.toString(16).toUpperCase().padStart(2,"0")}`;let n=r?s?xr:br:yr,o=w(e);return(n.has(o)?"\\":"")+o}function Mr(e){let t=e.map(n=>n.codePointAt(0)).sort((n,o)=>n-o),r=[],s=null;for(let n=0;n<t.length;n++)t[n+1]===t[n]+1?s??=t[n]:s===null?r.push(t[n]):(r.push([s,t[n]]),s=null);return r}function Ur(e,t,r){if(e)return">";let s="";if(t&&r){let{enable:n,disable:o}=t;s=(n?.ignoreCase?"i":"")+(n?.dotAll?"s":"")+(o?"-":"")+(o?.ignoreCase?"i":"")+(o?.dotAll?"s":"")}return`${s}:`}function Dr({min:e,max:t,greedy:r,possessive:s}){let n;return!e&&t===1?n="?":!e&&t===1/0?n="*":e===1&&t===1/0?n="+":e===t?n=`{${e}}`:n=`{${e},${t===1/0?"":t}}`,n+(s?"+":r?"":"?")}function Br(e){return e>47&&e<58}var y=Object.freeze({DEFAULT:"DEFAULT",CHAR_CLASS:"CHAR_CLASS"});function G(e,t,r,s){let n=new RegExp(String.raw`${t}|(?<$skip>\[\^?|\\?.)`,"gsu"),o=[!1],a=0,i="";for(let c of e.matchAll(n)){let{0:u,groups:{$skip:p}}=c;if(!p&&(!s||s===y.DEFAULT==!a)){r instanceof Function?i+=r(c,{context:a?y.CHAR_CLASS:y.DEFAULT,negated:o[o.length-1]}):i+=r;continue}u[0]==="["?(a++,o.push(u[1]==="^")):u==="]"&&a&&(a--,o.pop()),i+=u}return i}function ke(e,t,r,s){G(e,t,r,s)}function Vr(e,t,r=0,s){if(!new RegExp(t,"su").test(e))return null;let n=new RegExp(`${t}|(?<$skip>\\\\?.)`,"gsu");n.lastIndex=r;let o=0,a;for(;a=n.exec(e);){let{0:i,groups:{$skip:c}}=a;if(!c&&(!s||s===y.DEFAULT==!o))return a;i==="["?o++:i==="]"&&o&&o--,n.lastIndex==a.index&&n.lastIndex++}return null}function ae(e,t,r){return!!Vr(e,t,0,r)}function ht(e,t){let r=/\\?./gsu;r.lastIndex=t;let s=e.length,n=0,o=1,a;for(;a=r.exec(e);){let[i]=a;if(i==="[")n++;else if(n)i==="]"&&n--;else if(i==="(")o++;else if(i===")"&&(o--,!o)){s=a.index;break}}return e.slice(t,s)}var oe="$E$",X=class e extends RegExp{_captureMap;constructor(t,r,s){let n;s?.useEmulationGroups&&({expression:t,captureMap:n}=jr(t)),super(t,r),n?this._captureMap=n:t instanceof e&&(this._captureMap=t._captureMap)}exec(t){let r=RegExp.prototype.exec.call(this,t);if(!r||!this._captureMap)return r;let s=[...r];r.length=1;let n;this.hasIndices&&(n=[...r.indices],r.indices.length=1);for(let o=1;o<s.length;o++)this._captureMap[o]&&(r.push(s[o]),this.hasIndices&&r.indices.push(n[o]));return r}};function jr(e){let t=oe.replace(/\$/g,"\\$"),r=[!0];return e=G(e,String.raw`\((?:(?!\?)|\?<(?![=!])[^>]+>)(?<mark>${t})?`,({0:s,groups:{mark:n}})=>n?(r.push(!1),s.slice(0,-oe.length)):(r.push(!0),s),y.DEFAULT),{captureMap:r,expression:e}}var dt={DEFAULT:"DEFAULT",CHAR_CLASS:"CHAR_CLASS",ENCLOSED_P:"ENCLOSED_P",ENCLOSED_U:"ENCLOSED_U",GROUP_NAME:"GROUP_NAME",INTERVAL_QUANTIFIER:"INTERVAL_QUANTIFIER",INVALID_INCOMPLETE_TOKEN:"INVALID_INCOMPLETE_TOKEN"},ye={DEFAULT:"DEFAULT",ENCLOSED_P:"ENCLOSED_P",ENCLOSED_Q:"ENCLOSED_Q",ENCLOSED_U:"ENCLOSED_U",INVALID_INCOMPLETE_TOKEN:"INVALID_INCOMPLETE_TOKEN",RANGE:"RANGE"},Hn=new Set([dt.ENCLOSED_P,dt.ENCLOSED_U]),Qn=new Set([ye.ENCLOSED_P,ye.ENCLOSED_Q,ye.ENCLOSED_U]),Wn=(()=>{try{new RegExp("(?i:)")}catch{return!1}return!0})(),qn=(()=>{try{new RegExp("","v")}catch{return!1}return!0})();var Kr=String.raw`\(\?<(?![=!])(?<captureName>[^>]+)>`,zn=String.raw`\((?!\?)(?!(?<=\(\?\()DEFINE\))|${Kr}`,Ct=String.raw`\(\?(?:[:=!>A-Za-z\-]|<[=!]|\(DEFINE\))`;var Hr=["Basic_Emoji","Emoji_Keycap_Sequence","RGI_Emoji_Modifier_Sequence","RGI_Emoji_Flag_Sequence","RGI_Emoji_Tag_Sequence","RGI_Emoji_ZWJ_Sequence","RGI_Emoji"].join("|"),Xn=new RegExp(String.raw`
\\(?: c[A-Za-z]
  | p\{(?<pStrProp>${Hr})\}
  | [pP]\{[^\}]+\}
  | (?<qStrProp>q)
  | u(?:[A-Fa-f\d]{4}|\{[A-Fa-f\d]+\})
  | x[A-Fa-f\d]{2}
  | .
)
| --
| &&
| .
`.replace(/\s+/g,""),"gsu");var Zn=new RegExp(String.raw`
(?<groupN>\(\?<(?![=!])|\\[gk]<)
| (?<enclosedPU>\\[pPu]\{)
| (?<enclosedQ>\\q\{)
| (?<intervalQ>\{)
| (?<incompleteT>\\(?: $
  | c(?![A-Za-z])
  | u(?![A-Fa-f\d]{4})[A-Fa-f\d]{0,3}
  | x(?![A-Fa-f\d]{2})[A-Fa-f\d]?
  )
)
| --
| \\?.
`.replace(/\s+/g,""),"gsu");function mt(e,t,r,s){return e.slice(0,t)+s+e.slice(t+r.length)}var Et=new RegExp(String.raw`(?<noncapturingStart>${Ct})|(?<capturingStart>\((?:\?<[^>]+>)?)|\\?.`,"gsu");function xe(e,t){if(!/\(\?>/.test(e))return e;let r="(?>",s=`(?:(?=(${t?.useEmulationGroups?oe:""}`,n=[0],o=0,a=0,i=NaN,c;do{c=!1;let u=0,p=0,C=!1,d;for(Et.lastIndex=Number.isNaN(i)?0:i+s.length;d=Et.exec(e);){let{0:h,index:S,groups:{capturingStart:L,noncapturingStart:T}}=d;if(h==="[")u++;else if(u)h==="]"&&u--;else if(h===r&&!C)i=S,C=!0;else if(C&&T)p++;else if(L)C?p++:(o++,n.push(o+a));else if(h===")"&&C){if(!p){a++,e=`${e.slice(0,i)}${s}${e.slice(i+r.length,S)}))<$$${a+o}>)${e.slice(S+1)}`,c=!0;break}p--}}}while(c);return e=G(e,String.raw`\\(?<backrefNum>[1-9]\d*)|<\$\$(?<wrappedBackrefNum>\d+)>`,({0:u,groups:{backrefNum:p,wrappedBackrefNum:C}})=>{if(p){let d=+p;if(d>n.length-1)throw new Error(`Backref "${u}" greater than number of captures`);return`\\${n[d]}`}return`\\${C}`},y.DEFAULT),e}var wt=String.raw`(?:[?*+]|\{\d+(?:,\d*)?\})`,be=new RegExp(String.raw`
\\(?: \d+
  | c[A-Za-z]
  | [gk]<[^>]+>
  | [pPu]\{[^\}]+\}
  | u[A-Fa-f\d]{4}
  | x[A-Fa-f\d]{2}
  )
| \((?: \? (?: [:=!>]
  | <(?:[=!]|[^>]+>)
  | [A-Za-z\-]+:
  | \(DEFINE\)
  ))?
| (?<qBase>${wt})(?<qMod>[?+]?)(?<invalidQ>[?*+\{]?)
| \\?.
`.replace(/\s+/g,""),"gsu");function Fe(e){if(!new RegExp(`${wt}\\+`).test(e))return e;let t=[],r=null,s=null,n="",o=0,a;for(be.lastIndex=0;a=be.exec(e);){let{0:i,index:c,groups:{qBase:u,qMod:p,invalidQ:C}}=a;if(i==="[")o||(s=c),o++;else if(i==="]")o?o--:s=null;else if(!o)if(p==="+"&&n&&!n.startsWith("(")){if(C)throw new Error(`Invalid quantifier "${i}"`);let d=-1;if(/^\{\d+\}$/.test(u))e=mt(e,c+u.length,p,"");else{if(n===")"||n==="]"){let h=n===")"?r:s;if(h===null)throw new Error(`Invalid unmatched "${n}"`);e=`${e.slice(0,h)}(?>${e.slice(h,c)}${u})${e.slice(c+i.length)}`}else e=`${e.slice(0,c-n.length)}(?>${n}${u})${e.slice(c+i.length)}`;d+=4}be.lastIndex+=d}else i[0]==="("?t.push(c):i===")"&&(r=t.length?t.pop():null);n=i}return e}var Qr=String.raw`\\g<(?<gRNameOrNum>[^>&]+)&R=(?<gRDepth>[^>]+)>`,$e=String.raw`\(\?R=(?<rDepth>[^\)]+)\)|${Qr}`,Ie=String.raw`\(\?<(?![=!])(?<captureName>[^>]+)>`,R=new RegExp(String.raw`${Ie}|${$e}|\(\?|\\?.`,"gsu"),Ne="Cannot use multiple overlapping recursions";function kt(e){if(!new RegExp($e,"su").test(e))return e;if(ae(e,String.raw`\\[1-9]`,y.DEFAULT))throw new Error("Numbered backrefs cannot be used with recursion");if(ae(e,String.raw`\(\?\(DEFINE\)`,y.DEFAULT))throw new Error("DEFINE groups cannot be used with recursion");let t=new Map,r=[],s=!1,n=0,o=0,a;for(R.lastIndex=0;a=R.exec(e);){let{0:i,groups:{captureName:c,rDepth:u,gRNameOrNum:p,gRDepth:C}}=a;if(i==="[")n++;else if(n)i==="]"&&n--;else if(u){if(St(u),s)throw new Error(Ne);let d=e.slice(0,a.index),h=e.slice(R.lastIndex);if(ae(h,$e,y.DEFAULT))throw new Error(Ne);return At(d,h,+u,!1)}else if(p){St(C);let d=!1;for(let D of r)if(D.name===p||D.num===+p){if(d=!0,D.hasRecursedWithin)throw new Error(Ne);break}if(!d)throw new Error(`Recursive \\g cannot be used outside the referenced group "\\g<${p}&R=${C}>"`);let h=t.get(p),S=ht(e,h),L=e.slice(h,a.index),T=S.slice(L.length+i.length),b=At(L,T,+C,!0),bt=e.slice(0,h),xt=e.slice(h+S.length);e=`${bt}${b}${xt}`,R.lastIndex+=b.length-i.length-L.length-T.length,r.forEach(D=>D.hasRecursedWithin=!0),s=!0}else if(c)o++,t.set(String(o),R.lastIndex),t.set(c,R.lastIndex),r.push({num:o,name:c});else if(i.startsWith("(")){let d=i==="(";d&&(o++,t.set(String(o),R.lastIndex)),r.push(d?{num:o}:{})}else i===")"&&r.pop()}return e}function St(e){let t=`Max depth must be integer between 2 and 100; used ${e}`;if(!/^[1-9]\d*$/.test(e))throw new Error(t);if(e=+e,e<2||e>100)throw new Error(t)}function At(e,t,r,s){let n=new Set;s&&ke(e+t,Ie,({groups:{captureName:a}})=>{n.add(a)},y.DEFAULT);let o=r-1;return`${e}${_t(`(?:${e}`,o,s?n:null)}(?:)${_t(`${t})`,o,s?n:null,"backward")}${t}`}function _t(e,t,r,s="forward"){let o=i=>s==="backward"?t-i+2-1:i+2,a="";for(let i=0;i<t;i++){let c=o(i);a+=G(e,String.raw`${Ie}|\\k<(?<backref>[^>]+)>`,({0:u,groups:{captureName:p,backref:C}})=>{if(C&&r&&!r.has(C))return u;let d=`_$${c}`;return p?`(?<${p}${d}>`:`\\k<${C}${d}>`},y.DEFAULT)}return a}function yt(e,t){let r=Z(t),s=H(e,r.flags),n=q(s,{skipBackrefValidation:r.tmGrammar,verbose:r.verbose}),o=tt(n,{accuracy:r.accuracy,avoidSubclass:r.avoidSubclass,bestEffortTarget:r.target}),a=ft(o,r);e=Fe(kt(a.pattern));let i=xe(e,{useEmulationGroups:!r.avoidSubclass}),c=i!==e&&!r.avoidSubclass;e=i;let u={pattern:e,flags:`${r.hasIndices?"d":""}${r.global?"g":""}${a.flags}${a.options.disable.v?"u":"v"}`};return(c||o._strategy)&&(u.subclass={useEmulationGroups:c,strategy:o._strategy??null}),u}function Wr(e,t){return q(H(e,t?.flags))}function qr(e,t){let r=yt(e,t);return r.subclass?new ie(r.pattern,r.flags,r.subclass):new RegExp(r.pattern,r.flags)}var ie=class e extends X{#e;constructor(t,r,s){let n={useEmulationGroups:!1,strategy:null,...s};super(t,r,{useEmulationGroups:n.useEmulationGroups}),n.strategy?this.#e=n.strategy:t instanceof e&&(this.#e=t.#e)}exec(t){let r=super.exec,s=this.global||this.sticky,n=this.lastIndex,o=this.#e;if(o==="line_or_search_start"&&s&&this.lastIndex){this.lastIndex=0;let a=r.call(this,t.slice(n));return a&&(a.input=t,a.index+=n,this.lastIndex+=n),a}if(o==="not_search_start"){let a=r.call(this,t);if(a?.index===n){let i=s?this:new RegExp(this.source,`g${this.flags}`);i.lastIndex=a.index+1,a=r.call(i,t)}return a}return r.call(this,t)}};return Pt(zr);})();
//# sourceMappingURL=index.min.js.map
